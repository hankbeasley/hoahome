package com.trackerpak;


import _root_.android.app.Activity;
import _root_.android.os.Bundle;
import _root_.android.widget.TextView;
import _root_.android.content.Context
import _root_.android.location.LocationManager;
import _root_.android.location.LocationListener;
import _root_.android.location.Location;
import dto.GpsReading;

class MainActivity extends Activity with LocationListener
{
	/** Called when the activity is first created. */
	var count=0;
	var gpsReadings = List[GpsReading]();
	override def onCreate(savedInstanceState: Bundle ) {
		super.onCreate(savedInstanceState);
		var tv = new TextView(this);
		tv.setText("this is a test scala2");
		setContentView(tv);

		var manager = this.getSystemService(Context.LOCATION_SERVICE).asInstanceOf[LocationManager];
		manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,0, this )

	}
	//Called when the location has changed.
	override def	 onLocationChanged(location: Location) {
		count = count +1;
		if (count < 10){
			var tv = new TextView(this);
			tv.setText("this is a test scala:" + location.getLatitude());
			setContentView(tv);
			var g:GpsReading = new GpsReading();
			g.latitude = location.getLatitude();
			g.longitude = location.getLongitude();
			gpsReadings = g :: gpsReadings;
			var q =23;
		}
	}
	override def onProviderDisabled(provider: String){}
	//Called when the provider is disabled by the user.
	override def onProviderEnabled(provider: String){}
	//Called when the provider is enabled by the user.
	override def onStatusChanged(provider: String, status: int, extras:Bundle){}
	//Called when the provider status changes.
 
	def getCount(){
		return count;
	}
}